"use strict";(self["webpackChunk_linhntaim_ethereum_simple_faucet_home"]=self["webpackChunk_linhntaim_ethereum_simple_faucet_home"]||[]).push([[45],{1426:function(t,e,n){n.r(e),n.d(e,{default:function(){return It}});var i=n(3396),s=n(7139),a=n(9242);const l=t=>((0,i.dD)("data-v-4403d456"),t=t(),(0,i.Cn)(),t),r={class:"px-4 py-5 my-5 text-center"},o=l((()=>(0,i._)("h1",{class:"display-5 fw-bold text-body-emphasis"},"Get & Donate Coins",-1))),u={class:"col-lg-6 mx-auto"},h=l((()=>(0,i._)("p",{class:"lead mb-4"},[(0,i.Uk)("Firstly, you must connect your wallet and switch to the "),(0,i._)("span",{class:"tip",title:"See About page"},"supported networks"),(0,i.Uk)(". Then, to get coins, simply click the "),(0,i._)("strong",null,'"Get"'),(0,i.Uk)(" button below. Besides, we are really happy and thankful if you can make a donation to our decentralized funds.")],-1))),c=l((()=>(0,i._)("div",{class:"text-center"},null,-1))),d={class:"alert alert-primary"},g=(0,i.Uk)("Your address:"),m=l((()=>(0,i._)("br",null,null,-1))),f=l((()=>(0,i._)("br",null,null,-1))),w={key:0},p={key:1,class:"text-danger"},b={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},v=["disabled"],y={key:0,class:"form-text"},Z=["title"],C=(0,i.Uk)("You've got coins recently"),S=l((()=>(0,i._)("hr",null,null,-1))),k={class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},D=["disabled"],_={class:"alert alert-warning small mt-2 mb-2"},x=(0,i.Uk)("Click "),A=l((()=>(0,i._)("strong",null,"Donate",-1))),F=l((()=>(0,i._)("span",{class:"tip",title:"Which manages the fund (see About page for the sourcecode)"},"smart contract",-1))),U=(0,i.Uk)(' at the address "'),I=(0,i.Uk)('" via '),M=l((()=>(0,i._)("em",null,"your wallet",-1))),T=(0,i.Uk)("."),$={class:"progress",role:"progressbar","aria-label":"Basic example","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},W={key:1,class:"d-grid gap-2 d-sm-flex justify-content-sm-center"},N={key:1,class:"alert alert-danger"};function B(t,e,n,l,B,z){return(0,i.wg)(),(0,i.iD)("div",r,[o,(0,i._)("div",u,[h,c,B.wallet.installed?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[B.wallet.address?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",d,[(0,i._)("span",null,[g,m,(0,i._)("strong",null,(0,s.zw)(z.obfuscatedWalletAdress),1)]),f,null!=B.wallet.chain?((0,i.wg)(),(0,i.iD)("span",w,(0,s.zw)(B.wallet.chain.name),1)):((0,i.wg)(),(0,i.iD)("span",p,"Unknown or Not-supported Network"))]),null!=B.wallet.chain?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("div",b,[(0,i._)("button",{class:"btn btn-primary btn-lg px-4 gap-3",disabled:B.loading.get,onClick:e[0]||(e[0]=(...t)=>z.onGetClick&&z.onGetClick(...t)),type:"button"},"Get "+(0,s.zw)(B.sendingAmount)+" "+(0,s.zw)(B.wallet.chain.nativeCurrency.symbol),9,v)]),B.lastSentAt>0?((0,i.wg)(),(0,i.iD)("div",y,[(0,i._)("span",{class:(0,s.C_)({"tip text-danger":z.lastSentMinutesAgo<B.delayMinutes}),title:"You can get coins once every "+z.delayDurationText},[z.lastSentDuration.hour>0||z.lastSentDuration.minute>0?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i.Uk)("You got coins "+(0,s.zw)(z.lastSentDurationText)+" ago",1)],64)):((0,i.wg)(),(0,i.iD)(i.HY,{key:1},[C],64))],10,Z)])):(0,i.kq)("",!0),S,(0,i._)("div",k,[(0,i.wy)((0,i._)("input",{class:"form-control border-warning text-end fw-bold",type:"number",step:"0.01",min:"0.01",max:"100","onUpdate:modelValue":e[1]||(e[1]=t=>B.donatingAmount=t)},null,512),[[a.nr,B.donatingAmount]]),(0,i._)("button",{class:"btn btn-warning btn-lg px-4 gap-3",disabled:B.loading.donate,onClick:e[2]||(e[2]=(...t)=>z.onDonateClick&&z.onDonateClick(...t)),type:"button"},"Donate",8,D)]),(0,i._)("div",_,[x,A,(0,i.Uk)(" to send "+(0,s.zw)(B.donatingAmount)+" "+(0,s.zw)(B.wallet.chain.nativeCurrency.symbol)+" to our ",1),F,U,(0,i._)("strong",null,(0,s.zw)(z.faucetContractAddress),1),I,M,T]),(0,i._)("div",$,[(0,i._)("div",{class:"progress-bar bg-warning",style:(0,s.j5)({width:z.fundPercentage+"%"})},null,4)])],64)):(0,i.kq)("",!0)],64)):((0,i.wg)(),(0,i.iD)("div",W,[(0,i._)("button",{class:"btn btn-primary btn-lg px-4 gap-3",type:"button",onClick:e[3]||(e[3]=(...t)=>z.onConnectWalletClick&&z.onConnectWalletClick(...t))},"Connect wallet")]))],64)):((0,i.wg)(),(0,i.iD)("div",N,"Please install an Ethereum-based Wallet."))])])}var z=n(1427),E=n(3781),P=n(714),Y=n(7327),R=n(9614),L=n(8829),G=n(2575),O=n(4304),j=n(7223),q=n(1726);const H=BigInt(-1),V=BigInt(0),J=BigInt(1),K=BigInt(5),Q={};let X="0000";while(X.length<80)X+=X;function tt(t){let e=X;while(e.length<t)e+=e;return BigInt("1"+e.substring(0,t))}function et(t,e,n){const i=BigInt(e.width);if(e.signed){const e=J<<i-J;(0,z.hu)(null==n||t>=-e&&t<e,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=t>V?(0,j._Y)((0,j.sS)(t,i),i):-(0,j._Y)((0,j.sS)(-t,i),i)}else{const e=J<<i;(0,z.hu)(null==n||t>=0&&t<e,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:t}),t=(t%e+e)%e&e-J}return t}function nt(t){"number"===typeof t&&(t=`fixed128x${t}`);let e=!0,n=128,i=18;if("string"===typeof t)if("fixed"===t);else if("ufixed"===t)e=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,z.en)(s,"invalid fixed format","format",t),e="u"!==s[1],n=parseInt(s[2]),i=parseInt(s[3])}else if(t){const s=t,a=(t,e,n)=>null==s[t]?n:((0,z.en)(typeof s[t]===e,"invalid fixed format ("+t+" not "+e+")","format."+t,s[t]),s[t]);e=a("signed","boolean",e),n=a("width","number",n),i=a("decimals","number",i)}(0,z.en)(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),(0,z.en)(i<=80,"invalid FixedNumber decimals (too large)","format.decimals",i);const s=(e?"":"u")+"fixed"+String(n)+"x"+String(i);return{signed:e,width:n,decimals:i,name:s}}function it(t,e){let n="";t<V&&(n="-",t*=H);let i=t.toString();if(0===e)return n+i;while(i.length<=e)i=X+i;const s=i.length-e;i=i.substring(0,s)+"."+i.substring(s);while("0"===i[0]&&"."!==i[1])i=i.substring(1);while("0"===i[i.length-1]&&"."!==i[i.length-2])i=i.substring(0,i.length-1);return n+i}var st=new WeakMap,at=new WeakMap,lt=new WeakMap,rt=new WeakSet,ot=new WeakSet,ut=new WeakSet,ht=new WeakSet,ct=new WeakSet,dt=new WeakSet;class gt{constructor(t,e,n){(0,E.Z)(this,dt),(0,E.Z)(this,ct),(0,E.Z)(this,ht),(0,E.Z)(this,ut),(0,E.Z)(this,ot),(0,E.Z)(this,rt),(0,Y.Z)(this,"format",void 0),(0,P.Z)(this,st,{writable:!0,value:void 0}),(0,P.Z)(this,at,{writable:!0,value:void 0}),(0,P.Z)(this,lt,{writable:!0,value:void 0}),(0,Y.Z)(this,"_value",void 0),(0,z.NK)(t,Q,"FixedNumber"),(0,G.Z)(this,at,e),(0,G.Z)(this,st,n);const i=it(e,n.decimals);(0,q.h)(this,{format:n.name,_value:i}),(0,G.Z)(this,lt,tt(n.decimals))}get signed(){return(0,L.Z)(this,st).signed}get width(){return(0,L.Z)(this,st).width}get decimals(){return(0,L.Z)(this,st).decimals}get value(){return(0,L.Z)(this,at)}addUnsafe(t){return(0,R.Z)(this,ut,wt).call(this,t)}add(t){return(0,R.Z)(this,ut,wt).call(this,t,"add")}subUnsafe(t){return(0,R.Z)(this,ht,pt).call(this,t)}sub(t){return(0,R.Z)(this,ht,pt).call(this,t,"sub")}mulUnsafe(t){return(0,R.Z)(this,ct,bt).call(this,t)}mul(t){return(0,R.Z)(this,ct,bt).call(this,t,"mul")}mulSignal(t){(0,R.Z)(this,rt,mt).call(this,t);const e=(0,L.Z)(this,at)*(0,L.Z)(t,at);return(0,z.hu)(e%(0,L.Z)(this,lt)===V,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),(0,R.Z)(this,ot,ft).call(this,e/(0,L.Z)(this,lt),"mulSignal")}divUnsafe(t){return(0,R.Z)(this,dt,vt).call(this,t)}div(t){return(0,R.Z)(this,dt,vt).call(this,t,"div")}divSignal(t){(0,z.hu)((0,L.Z)(t,at)!==V,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),(0,R.Z)(this,rt,mt).call(this,t);const e=(0,L.Z)(this,at)*(0,L.Z)(this,lt);return(0,z.hu)(e%(0,L.Z)(t,at)===V,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),(0,R.Z)(this,ot,ft).call(this,e/(0,L.Z)(t,at),"divSignal")}cmp(t){let e=this.value,n=t.value;const i=this.decimals-t.decimals;return i>0?n*=tt(i):i<0&&(e*=tt(-i)),e<n?-1:e>n?1:0}eq(t){return 0===this.cmp(t)}lt(t){return this.cmp(t)<0}lte(t){return this.cmp(t)<=0}gt(t){return this.cmp(t)>0}gte(t){return this.cmp(t)>=0}floor(){let t=(0,L.Z)(this,at);return(0,L.Z)(this,at)<V&&(t-=(0,L.Z)(this,lt)-J),t=(0,L.Z)(this,at)/(0,L.Z)(this,lt)*(0,L.Z)(this,lt),(0,R.Z)(this,ot,ft).call(this,t,"floor")}ceiling(){let t=(0,L.Z)(this,at);return(0,L.Z)(this,at)>V&&(t+=(0,L.Z)(this,lt)-J),t=(0,L.Z)(this,at)/(0,L.Z)(this,lt)*(0,L.Z)(this,lt),(0,R.Z)(this,ot,ft).call(this,t,"ceiling")}round(t){if(null==t&&(t=0),t>=this.decimals)return this;const e=this.decimals-t,n=K*tt(e-1);let i=this.value+n;const s=tt(e);return i=i/s*s,et(i,(0,L.Z)(this,st),"round"),new gt(Q,i,(0,L.Z)(this,st))}isZero(){return(0,L.Z)(this,at)===V}isNegative(){return(0,L.Z)(this,at)<V}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return gt.fromString(this.toString(),t)}static fromValue(t,e,n){const i=null==e?0:(0,j.Dx)(e),s=nt(n);let a=(0,j.yT)(t,"value");const l=i-s.decimals;if(l>0){const e=tt(l);(0,z.hu)(a%e===V,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:t}),a/=e}else l<0&&(a*=tt(-l));return et(a,s,"fromValue"),new gt(Q,a,s)}static fromString(t,e){const n=t.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,z.en)(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",t);const i=nt(e);let s=n[2]||"0",a=n[3]||"";while(a.length<i.decimals)a+=X;(0,z.hu)(a.substring(i.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:t}),a=a.substring(0,i.decimals);const l=BigInt(n[1]+s+a);return et(l,i,"fromString"),new gt(Q,l,i)}static fromBytes(t,e){let n=(0,j.Gh)((0,O.Pw)(t,"value"));const i=nt(e);return i.signed&&(n=(0,j._Y)(n,i.width)),et(n,i,"fromBytes"),new gt(Q,n,i)}}function mt(t){(0,z.en)(this.format===t.format,"incompatible format; use fixedNumber.toFormat","other",t)}function ft(t,e){return t=et(t,(0,L.Z)(this,st),e),new gt(Q,t,(0,L.Z)(this,st))}function wt(t,e){return(0,R.Z)(this,rt,mt).call(this,t),(0,R.Z)(this,ot,ft).call(this,(0,L.Z)(this,at)+(0,L.Z)(t,at),e)}function pt(t,e){return(0,R.Z)(this,rt,mt).call(this,t),(0,R.Z)(this,ot,ft).call(this,(0,L.Z)(this,at)-(0,L.Z)(t,at),e)}function bt(t,e){return(0,R.Z)(this,rt,mt).call(this,t),(0,R.Z)(this,ot,ft).call(this,(0,L.Z)(this,at)*(0,L.Z)(t,at)/(0,L.Z)(this,lt),e)}function vt(t,e){return(0,z.hu)((0,L.Z)(t,at)!==V,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),(0,R.Z)(this,rt,mt).call(this,t),(0,R.Z)(this,ot,ft).call(this,(0,L.Z)(this,at)*(0,L.Z)(this,lt)/(0,L.Z)(t,at),e)}const yt=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Zt(t,e){let n=18;if("string"===typeof e){const t=yt.indexOf(e);(0,z.en)(t>=0,"invalid unit","unit",e),n=3*t}else null!=e&&(n=(0,j.Dx)(e,"unit"));return gt.fromValue(t,n,{decimals:n,width:512}).toString()}function Ct(t,e){(0,z.en)("string"===typeof t,"value must be a string","value",t);let n=18;if("string"===typeof e){const t=yt.indexOf(e);(0,z.en)(t>=0,"invalid unit","unit",e),n=3*t}else null!=e&&(n=(0,j.Dx)(e,"unit"));return gt.fromString(t,{decimals:n,width:512}).value}function St(t){return Zt(t,18)}class kt{constructor(t,e=""){this.message=t,this.type=e}}class Dt extends kt{constructor(t){super(t,"success")}}class _t extends kt{constructor(t){super(t,"danger")}}var xt=JSON.parse('{"57000":{"faucetContractAddress":"0xCa8Bf6423A58Db18C8A2CcbFF0a107BC05DE4F45"}}'),At={name:"Home",data(){return{loading:{get:!1,donate:!1},wallet:{installed:!1,address:null,chain:null},fund:{balance:0,cap:0},delayMinutes:0,lastSentAt:0,sendingAmount:.02,donatingAmount:.02,now:0,refreshDataFromContractTimeout:null}},computed:{chainId(){return null==this.wallet.chain?null:parseInt(this.wallet.chain.chainId)},obfuscatedWalletAdress(){return null==this.wallet.address?null:this.wallet.address.substr(0,6)+"..."+this.wallet.address.substr(this.wallet.address.length-4)},faucetContractAddress(){return null==this.chainId?null:xt[this.chainId].faucetContractAddress},fundPercentage(){return 0===this.fund.cap?100:(t=>t>100?100:t)(Math.floor(this.fund.balance/this.fund.cap*100))},lastSentMinutesAgo(){return Math.floor((this.now-this.lastSentAt)/60)},lastSentDuration(){return{hour:Math.floor(this.lastSentMinutesAgo/60),minute:this.lastSentMinutesAgo%60}},lastSentDurationText(){return(this.lastSentDuration.hour>0?this.lastSentDuration.hour+" "+(this.lastSentDuration.hour>1?"hours ":"hour "):"")+(this.lastSentDuration.minute>0?this.lastSentDuration.minute+" "+(this.lastSentDuration.minute>1?"minutes":"minute"):"")},delayDuration(){return{hour:Math.floor(this.delayMinutes/60),minute:this.delayMinutes%60}},delayDurationText(){const t=this.delayDuration;return(t.hour>0?t.hour+" "+(t.hour>1?"hours":"hour"):"")+t.minute+" "+(t.minute>1?"minutes":"minute")}},mounted(){this.construct()},unmounted(){this.destruct()},methods:{construct(){this.wallet.installed=this.$ethereum.connect().connected();const t=this.$ethereum.hasSigner();!1!==t&&this.initSigner(t)},destruct(){this.stopRefreshDataFromContract(),this.detachEvents()},onConnectWalletClick(){this.$ethereum.getSigner().then((t=>this.initSigner(t))).catch((t=>{this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))},initSigner(t){this.fillDataFromSigner(t),this.attachEvents()},fillDataFromSigner(t){this.wallet.address=t.address,t.provider.getNetwork().then((t=>{this.$ethereum.getChains().then((e=>{const n=parseInt(t.chainId);n in e&&n in xt?(this.wallet.chain=e[n],this.refreshDataFromContract()):(this.stopRefreshDataFromContract(),this.wallet.chain=null)}))})).catch((t=>{this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))},refreshDataFromContract(){this.fillDataFromContract(),this.refreshDataFromContractTimeout=setTimeout((()=>{this.refreshDataFromContract()}),6e4)},stopRefreshDataFromContract(){null!=this.refreshDataFromContractTimeout&&(clearTimeout(this.refreshDataFromContractTimeout),this.refreshDataFromContractTimeout=null)},fillDataFromContract(){const t=this.$ethereum.declareContract(this.faucetContractAddress,["function getBalance() public view returns (uint256)","function getSendingAmount() public view returns (uint256)","function getCap() public view returns (uint256)","function getDelayMinutes() public view returns (uint256)","function getTimeout() public view returns (uint256)"]);t.getSendingAmount().then((t=>{this.sendingAmount=parseFloat(St(t))})).catch((t=>console.log(t))),t.getCap().then((t=>{this.fund.cap=parseFloat(St(t))})).catch((t=>console.log(t))),t.getBalance().then((t=>{this.fund.balance=parseFloat(St(t))})).catch((t=>console.log(t))),t.getDelayMinutes().then((t=>{this.delayMinutes=parseInt(t)})).catch((t=>console.log(t))),t.getTimeout().then((t=>{this.lastSentAt=parseInt(t)})).catch((t=>console.log(t))),this.now=Math.floor((new Date).getTime()/1e3)},onWalletChanged(){this.$ethereum.getSigner().then((t=>this.fillDataFromSigner(t))).catch((t=>{this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))},attachEvents(){this.$ethereum.on("accountsChanged",this.onWalletChanged),this.$ethereum.on("chainChanged",this.onWalletChanged)},detachEvents(){this.$ethereum.off("accountsChanged",this.onWalletChanged),this.$ethereum.off("chainChanged",this.onWalletChanged)},onGetClick(){this.getWithFeePaidByOwner()},getWithFeePaidByOwner(){this.loading.get=!0,fetch("https://faucet-endpoint.dapp.io.vn/claim",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chainId:this.chainId,address:this.wallet.address})}).then((t=>{if(t.status>=400&&t.status<600)throw t;return t.json()})).then((()=>{this.loading.get=!1,this.$bus.emit("toast",new Dt("Successfully request to send "+this.sendingAmount+" "+this.wallet.chain.nativeCurrency.symbol+" to your wallet. Please wait for transaction confirmation."))})).catch((()=>{this.loading.get=!1,this.$bus.emit("toast",new _t("Something went wrong. Please try again."))}))},getWithFeePaidByUser(){const t=this.$ethereum.declareContract(this.faucetContractAddress,["function sendMe()"]);this.loading.get=!0,t.sendMe().then((()=>{this.loading.get=!1,this.$bus.emit("toast",new Dt("Successfully request to send "+this.sendingAmount+" "+this.wallet.chain.nativeCurrency.symbol+" to your wallet. Please wait for transaction confirmation."))})).catch((t=>{this.loading.get=!1,this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))},onDonateClick(){this.$ethereum.getSigner().then((t=>{this.loading.donate=!0,t.sendTransaction({to:this.faucetContractAddress,value:Ct(this.donatingAmount.toString(),18)}).then((()=>{this.loading.donate=!1,this.$bus.emit("toast",new Dt("Successfully request to donate "+this.donatingAmount+" "+this.wallet.chain.nativeCurrency.symbol+" to the smart contract. Please wait for transaction confirmation."))})).catch((t=>{this.loading.donate=!1,this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))})).catch((t=>{this.$bus.emit("toast",new _t(t.reason||"Something went wrong."))}))}}},Ft=n(89);const Ut=(0,Ft.Z)(At,[["render",B],["__scopeId","data-v-4403d456"]]);var It=Ut}}]);
//# sourceMappingURL=view-home.92a08365.js.map